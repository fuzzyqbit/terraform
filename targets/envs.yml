dev:
  aws_region: "us-east-1"
  
  vpc:
    inputs:
      project_name: "shared-infrastructure"
      environment: "dev"
      vpc_cidr: "10.0.0.0/16"
      az_count: 2
      public_subnet_cidrs: ["10.0.1.0/24", "10.0.2.0/24"]
      private_subnet_cidrs: ["10.0.11.0/24", "10.0.12.0/24"]
      enable_nat_gateway: true
      enable_vpn_gateway: false
      enable_dns_hostnames: true
      enable_dns_support: true
      tags:
        ManagedBy: "Terragrunt"
        Environment: "dev"
    tfvar_files:
      - dev.tfvars
  
  alb:
    inputs:
      alb_name: "my-awesome-app-alb-dev"
      internal: false
      vpc_id: "vpc-06f8952ded34448b6"
      subnet_ids: ["subnet-0c23820fc5cc4001e", "subnet-0d8c2285393cc1269"]
      target_group_name: "my-awesome-app-tg-dev"
      target_port: 80
      tags:
        ManagedBy: "Terragrunt"
        Environment: "dev"
    tfvar_files:
      - dev.tfvars
  
  ecs:
    inputs:
      aws_region: "us-east-1"
      region: "us-east-1"
      project_name: "my-awesome-app"
      app_name: "web-service"
      app_image: "httpd:alpine"
      container_port: 80
      health_check_path: "/"
      fargate_cpu: 256
      fargate_memory: 512
      desired_count: 3
      min_capacity: 1
      max_capacity: 10
      autoscaling_cpu_target: 70
      autoscaling_memory_target: 80
      log_retention_days: 7
      enable_container_insights: true
      vpc_id: "vpc-06f8952ded34448b6"
      public_subnet_ids: ["subnet-0c23820fc5cc4001e", "subnet-0c23820fc5cc4001e"]
      private_subnet_ids: ["subnet-0472e2b689940fdf7", "subnet-07242537ea69e971b"]

      # Wire ECS ALB-related variables to the ALB module outputs.
      # Replace these interpolation patterns with whatever your driver expects
      # (this uses module-style keys as an example).
      alb_security_group_id: "sg-0b0113330df0b6048"
      alb_target_group_arn: "arn:aws:elasticloadbalancing:us-east-1:668377652184:targetgroup/my-awesome-app-tg-dev/8e1ce4927c31f1bd"
      alb_arn: "arn:aws:elasticloadbalancing:us-east-1:668377652184:loadbalancer/app/my-awesome-app-alb-dev/7ee76d8d50af89d9"
      alb_dns_name: "my-awesome-app-alb-dev-351277166.us-east-1.elb.amazonaws.com"
      alb_zone_id: "Z35SXDOTRQ7X7K"

      environment_variables: 
        ENV: "dev"
        LOG_LEVEL: "info"
      secrets: {}
    tfvar_files:
      - dev.tfvars
  
  glue:
    inputs:
      aws_region: "us-east-1"
      region: "us-east-1"
      project_name: "nyc-taxi-analytics"
      environment: "dev"
      glue_version: "4.0"
      python_version: "3"
      worker_type: "G.1X"
      number_of_workers: 2
      max_retries: 1
      timeout_minutes: 60
      enable_continuous_log_filter: true
      enable_metrics: true
      enable_spark_ui: true
      enable_vpc: false
      tags:
        Team: "DataEngineering"
        CostCenter: "Analytics"
        Environment: "dev"
    tfvar_files:
      - dev.tfvars

prod:
  aws_region: "us-east-1"
  
  vpc:
    inputs:
      project_name: "shared-infrastructure"
      environment: "prod"
      vpc_cidr: "10.1.0.0/16"
      az_count: 3
      public_subnet_cidrs: ["10.1.1.0/24", "10.1.2.0/24", "10.1.3.0/24"]
      private_subnet_cidrs: ["10.1.11.0/24", "10.1.12.0/24", "10.1.13.0/24"]
      enable_nat_gateway: true
      enable_vpn_gateway: false
      enable_dns_hostnames: true
      enable_dns_support: true
      tags:
        ManagedBy: "Terragrunt"
        Environment: "prod"
    tfvar_files:
      - prod.tfvars
  
  alb:
    inputs:
      alb_name: "my-awesome-app-alb-prod"
      internal: false
      vpc_id: "vpc-yyy"
      subnet_ids: ["subnet-yyy1", "subnet-yyy2", "subnet-yyy3"]
      target_group_name: "my-awesome-app-tg-prod"
      target_port: 80
      tags:
        ManagedBy: "Terragrunt"
        Environment: "prod"
    tfvar_files:
      - prod.tfvars
  
  ecs:
    inputs:
      aws_region: "us-east-1"
      region: "us-east-1"
      project_name: "my-awesome-app"
      app_name: "web-service"
      app_image: "httpd:alpine"
      container_port: 80
      health_check_path: "/"
      fargate_cpu: 512
      fargate_memory: 1024
      desired_count: 5
      min_capacity: 3
      max_capacity: 20
      autoscaling_cpu_target: 60
      autoscaling_memory_target: 70
      log_retention_days: 30
      enable_container_insights: true
      vpc_id: "vpc-yyy"
      public_subnet_ids: ["subnet-yyy1", "subnet-yyy2", "subnet-yyy3"]
      private_subnet_ids: ["subnet-yyy11", "subnet-yyy12", "subnet-yyy13"]

      alb_security_group_id: "${module.alb.security_group_id}"
      alb_target_group_arn: "${module.alb.target_group_arn}"
      alb_arn: "${module.alb.arn}"
      alb_dns_name: "${module.alb.dns_name}"
      alb_zone_id: "${module.alb.zone_id}"

      environment_variables: 
        ENV: "production"
        LOG_LEVEL: "warn"
      secrets: {}
    tfvar_files:
      - prod.tfvars
  
  glue:
    inputs:
      aws_region: "us-east-1"
      region: "us-east-1"
      project_name: "nyc-taxi-analytics"
      environment: "prod"
      glue_version: "4.0"
      python_version: "3"
      worker_type: "G.2X"
      number_of_workers: 5
      max_retries: 2
      timeout_minutes: 120
      enable_continuous_log_filter: true
      enable_metrics: true
      enable_spark_ui: true
      enable_vpc: false
      tags:
        Team: "DataEngineering"
        CostCenter: "Analytics"
        Environment: "prod"
    tfvar_files:
      - prod.tfvars
